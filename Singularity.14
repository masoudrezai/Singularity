wget https://repo.continuum.io/archive/Anaconda3-2018.12-Linux-x86_64.sh
bash Anac* -b -p /anaconda3
conda install -y git
conda install -y -c anaconda redis
conda install -y -c conda-forge numactl-cos6-x86_64
conda install -y -c conda-forge blas
conda install -y numpy ninja pyyaml mkl mkl-include setuptools cmake cffi
conda install -y -c pytorch magma-cuda101
conda install -y -c conda-forge vim
conda install -c anaconda ipyparallel

#export CUDA_NVCC_EXECUTABLE="/usr/local/cuda-10.1/bin/nvcc"
#export CUDA_HOME="/usr/local/cuda-10.1"
#export CUDNN_INCLUDE_PATH="/usr/local/cuda-10.1/include/"
#export CUDNN_LIBRARY_PATH="/usr/local/cuda-10.1/lib64/"
#export LIBRARY_PATH="/usr/local/cuda-10.1/lib64"

export USE_CUDA=ON USE_CUDNN=ON USE_MKLDNN=ON USE_MKLDNN_CBLAS=ON USE_MPI=ON USE_CUDNN=ON USE_SYSTEM_NCCL=ON

git clone --branch v1.5.0 https://github.com/pytorch/pytorch.git pytorch-1.5.0
cd pytorch-1.5.0
git submodule update --init --recursive
export CMAKE_PREFIX_PATH=${CONDA_PREFIX:-"$(dirname $(which conda))/../"}
python setup.py install

git clone https://github.com/pytorch/vision.git vision
cd vision
python setup.py install

